(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[545],{7456:(e,a,t)=>{Promise.resolve().then(t.bind(t,2367))},2367:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>m});var r=t(5155),l=t(2115),s=t(5942),n=t(2783),i=t(1680),d=t(1342),o=t(6961),c=t(2107),u=t(5127);function m(){let[e,a]=(0,l.useState)(null),[t,m]=(0,l.useState)(null),[f,x]=(0,l.useState)(null),[p,g]=(0,l.useState)(!1),[v,h]=(0,l.useState)(null),y=(0,l.useRef)(null),N=async a=>{if(a.preventDefault(),!e){h("Please select an image to analyze.");return}try{g(!0),h(null);let a=new FormData;a.append("file",e);let t=await fetch("/api/analyze",{method:"POST",body:a});if(!t.ok)throw Error("HTTP error! status: ".concat(t.status));let r=await t.json();x(r.result)}catch(e){console.error("Error analyzing image:",e),h("Failed to analyze the image. Please try again.")}finally{g(!1)}};return(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 p-8",children:(0,r.jsxs)(c.Zp,{className:"max-w-2xl mx-auto",children:[(0,r.jsx)(c.aR,{children:(0,r.jsx)(c.ZB,{className:"text-center text-2xl font-bold",children:"Water Quality Analyzer"})}),(0,r.jsxs)(c.Wu,{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"border-2 border-dashed rounded-lg p-8 text-center transition-colors\n              ".concat(e?"border-blue-500":"border-gray-300 hover:border-gray-400","\n              ").concat(p?"opacity-50":""),onDragOver:e=>{e.preventDefault(),e.stopPropagation()},onDrop:e=>{if(e.preventDefault(),e.stopPropagation(),e.dataTransfer.files&&e.dataTransfer.files[0]){let t=e.dataTransfer.files[0];if(t.type.startsWith("image/")){a(t),h(null),x(null);let e=new FileReader;e.onloadend=()=>{m(e.result)},e.readAsDataURL(t)}else h("Please upload an image file.")}},onClick:()=>{var e;return null===(e=y.current)||void 0===e?void 0:e.click()},children:[(0,r.jsx)("input",{ref:y,type:"file",accept:"image/*",onChange:e=>{if(e.target.files&&e.target.files[0]){let t=e.target.files[0];a(t),h(null),x(null);let r=new FileReader;r.onloadend=()=>{m(r.result)},r.readAsDataURL(t)}},className:"hidden"}),t?(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("img",{src:t,alt:"Preview",className:"max-h-64 mx-auto rounded-lg shadow-md"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Click or drag to change image"})]}):(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)(s.A,{className:"w-12 h-12 mx-auto text-gray-400"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-lg font-medium",children:"Drop your image here or click to upload"}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Supports: JPG, PNG, GIF"})]})]})]}),p&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 justify-center text-blue-600",children:[(0,r.jsx)(n.A,{className:"w-5 h-5 animate-spin"}),(0,r.jsx)("span",{children:"Analyzing image..."})]}),(0,r.jsx)(u.k,{value:66,className:"h-1"})]}),v&&(0,r.jsxs)(o.Fc,{variant:"destructive",children:[(0,r.jsx)(i.A,{className:"h-4 w-4"}),(0,r.jsx)(o.TN,{children:v})]}),f&&(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-sm border",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 justify-center",children:[(0,r.jsx)(d.A,{className:"w-6 h-6 text-green-500"}),(0,r.jsx)("h3",{className:"text-xl font-semibold",children:"Analysis Complete"})]}),(0,r.jsxs)("div",{className:"mt-4 text-center",children:[(0,r.jsx)("p",{className:"text-gray-600",children:"Water Quality Assessment:"}),(0,r.jsx)("p",{className:"text-2xl font-bold mt-2 ".concat((e=>{switch(e){case"Excellent":return"text-green-600";case"Good":return"text-blue-600";case"Fair":return"text-yellow-600";case"Poor":return"text-red-600";default:return"text-gray-600"}})(f)),children:f})]})]}),(0,r.jsx)("button",{onClick:N,disabled:!e||p,className:"w-full py-3 px-4 rounded-lg font-medium text-white \n              transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2\n              ".concat(!e||p?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"),children:p?"Analyzing...":"Analyze Image"})]})]})})}},6961:(e,a,t)=>{"use strict";t.d(a,{Fc:()=>d,TN:()=>o});var r=t(5155),l=t(2115),s=t(1027),n=t(2558);let i=(0,s.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),d=l.forwardRef((e,a)=>{let{className:t,variant:l,...s}=e;return(0,r.jsx)("div",{ref:a,role:"alert",className:(0,n.cn)(i({variant:l}),t),...s})});d.displayName="Alert",l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,r.jsx)("h5",{ref:a,className:(0,n.cn)("mb-1 font-medium leading-none tracking-tight",t),...l})}).displayName="AlertTitle";let o=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,r.jsx)("div",{ref:a,className:(0,n.cn)("text-sm [&_p]:leading-relaxed",t),...l})});o.displayName="AlertDescription"},2107:(e,a,t)=>{"use strict";t.d(a,{Wu:()=>o,ZB:()=>d,Zp:()=>n,aR:()=>i});var r=t(5155),l=t(2115),s=t(2558);let n=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,r.jsx)("div",{ref:a,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...l})});n.displayName="Card";let i=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,r.jsx)("div",{ref:a,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",t),...l})});i.displayName="CardHeader";let d=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,r.jsx)("h3",{ref:a,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",t),...l})});d.displayName="CardTitle",l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,r.jsx)("p",{ref:a,className:(0,s.cn)("text-sm text-muted-foreground",t),...l})}).displayName="CardDescription";let o=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,r.jsx)("div",{ref:a,className:(0,s.cn)("p-6 pt-0",t),...l})});o.displayName="CardContent",l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,r.jsx)("div",{ref:a,className:(0,s.cn)("flex items-center p-6 pt-0",t),...l})}).displayName="CardFooter"},5127:(e,a,t)=>{"use strict";t.d(a,{k:()=>j});var r=t(5155),l=t(2115),s=t(8166),n=t(3360),i="Progress",[d,o]=(0,s.A)(i),[c,u]=d(i),m=l.forwardRef((e,a)=>{var t,l,s,i;let{__scopeProgress:d,value:o=null,max:u,getValueLabel:m=p,...f}=e;(u||0===u)&&!h(u)&&console.error((t="".concat(u),l="Progress","Invalid prop `max` of value `".concat(t,"` supplied to `").concat(l,"`. Only numbers greater than 0 are valid max values. Defaulting to `").concat(100,"`.")));let x=h(u)?u:100;null===o||y(o,x)||console.error((s="".concat(o),i="Progress","Invalid prop `value` of value `".concat(s,"` supplied to `").concat(i,"`. The `value` prop must be:\n  - a positive number\n  - less than the value passed to `max` (or ").concat(100," if no `max` prop is set)\n  - `null` or `undefined` if the progress is indeterminate.\n\nDefaulting to `null`.")));let N=y(o,x)?o:null,j=v(N)?m(N,x):void 0;return(0,r.jsx)(c,{scope:d,value:N,max:x,children:(0,r.jsx)(n.sG.div,{"aria-valuemax":x,"aria-valuemin":0,"aria-valuenow":v(N)?N:void 0,"aria-valuetext":j,role:"progressbar","data-state":g(N,x),"data-value":null!=N?N:void 0,"data-max":x,...f,ref:a})})});m.displayName=i;var f="ProgressIndicator",x=l.forwardRef((e,a)=>{var t;let{__scopeProgress:l,...s}=e,i=u(f,l);return(0,r.jsx)(n.sG.div,{"data-state":g(i.value,i.max),"data-value":null!==(t=i.value)&&void 0!==t?t:void 0,"data-max":i.max,...s,ref:a})});function p(e,a){return"".concat(Math.round(e/a*100),"%")}function g(e,a){return null==e?"indeterminate":e===a?"complete":"loading"}function v(e){return"number"==typeof e}function h(e){return v(e)&&!isNaN(e)&&e>0}function y(e,a){return v(e)&&!isNaN(e)&&e<=a&&e>=0}x.displayName=f;var N=t(2558);let j=l.forwardRef((e,a)=>{let{className:t,value:l,...s}=e;return(0,r.jsx)(m,{ref:a,className:(0,N.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...s,children:(0,r.jsx)(x,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(l||0),"%)")}})})});j.displayName=m.displayName},2558:(e,a,t)=>{"use strict";t.d(a,{cn:()=>s});var r=t(3463),l=t(9795);function s(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return(0,l.QP)((0,r.$)(a))}},1680:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(4057).A)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},1342:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(4057).A)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},5942:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(4057).A)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])}},e=>{var a=a=>e(e.s=a);e.O(0,[9,441,517,358],()=>a(7456)),_N_E=e.O()}]);